<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Leo Telecon - Internet rápida e confiável pra você nunca ficar offline!">
    <meta name="keywords" content="internet, fibra óptica, banda larga, internet rápida, nordeste">
    <meta name="theme-color" content="#0066ff">
    <title>Leo Telecon - Sua Internet, Sua Vibe</title>
    <link rel="manifest" href="/manifest.json">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');

        :root {
            --leo-blue: #0066ff;
            --leo-dark: #070d1a;
            --leo-gradient: linear-gradient(135deg, #0066ff 0%, #00ccff 100%);
            --leo-orange: #FF7A00;
            --leo-white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--leo-dark);
            color: var(--leo-white);
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .app-container {
            width: 100%;
            max-width: 414px;
            height: 100vh;
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            background: var(--leo-dark);
        }

        .story-slide {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            display: none;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
            opacity: 0;
            transform: translateY(100%);
            transition: opacity 0.5s, transform 0.5s;
        }

        .story-slide.active {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .video-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.5) contrast(1.2);
            z-index: 0;
        }

        .content {
            position: relative;
            z-index: 2;
            text-align: center;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .logo {
            font-size: 28px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .logo span {
            color: var(--leo-blue);
        }

        h1 {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        p {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .btn {
            background: var(--leo-gradient);
            color: var(--leo-white);
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 102, 255, 0.5);
        }

        .option-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--leo-blue);
            margin: 10px 0;
            padding: 12px;
            width: 100%;
            max-width: 300px;
            transition: transform 0.2s;
        }

        .option-btn:hover {
            transform: scale(1.05);
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 300px;
            margin: 0 auto;
        }

        .input {
            padding: 12px;
            border: 1px solid rgba(0, 102, 255, 0.3);
            background: rgba(0, 0, 0, 0.2);
            color: var(--leo-white);
            border-radius: 8px;
            font-size: 16px;
        }

        .progress-bar {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            height: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: var(--leo-blue);
            transition: width 0.5s;
        }

        .points-bar {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            color: var(--leo-orange);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--leo-dark);
            border-radius: 20px;
            padding: 20px;
            max-width: 90%;
            text-align: center;
        }

        .modal-content h2 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .app-container {
            animation: fadeIn 1s ease-out;
        }

        @media (max-height: 700px) {
            h1 {
                font-size: 28px;
            }
            p {
                font-size: 16px;
            }
            .btn {
                padding: 12px 25px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="progress-bar">
            <div class="progress" style="width: 0%"></div>
        </div>
        <div class="points-bar" id="points-bar">0 MegaPontos</div>

        <!-- Slide 1: Onboarding -->
        <div class="story-slide active" data-index="0">
            <video class="video-bg" autoplay loop muted playsinline>
                <source src="https://assets.mixkit.co/videos/preview/mixkit-fiber-optic-cables-in-a-dark-room-1234-large.mp4" type="video/mp4">
            </video>
            <div class="content">
                <div class="logo">LEO <span>TELECON</span></div>
                <h1>Ei, qual é o seu nome?</h1>
                <p>E o que você mais sonha fazer com uma internet rápida?</p>
                <form class="form-group" id="onboarding-form">
                    <input type="text" class="input" id="user-name" placeholder="Seu nome" aria-label="Digite seu nome">
                    <select class="input" id="user-dream" aria-label="Seu maior desejo com internet">
                        <option value="maratonar">Maratonar séries sem travar</option>
                        <option value="jogar">Jogar online sem lag</option>
                        <option value="trabalhar">Trabalhar sem quedas</option>
                    </select>
                    <button type="submit" class="btn">Começar a aventura</button>
                </form>
            </div>
        </div>

        <!-- Slide 2: Problema -->
        <div class="story-slide" data-index="1">
            <video class="video-bg" autoplay loop muted playsinline>
                <source src="https://assets.mixkit.co/videos/preview/mixkit-person-using-a-laptop-124-large.mp4" type="video/mp4">
            </video>
            <div class="content">
                <div class="logo">LEO <span>TELECON</span></div>
                <h1><span id="user-name-problem"></span>, o que te irrita na sua internet?</h1>
                <p>Escolha a maior frustração que você já passou!</p>
                <div class="form-group">
                    <button type="button" class="btn option-btn" data-problem="travando">Filmes travando no melhor momento</button>
                    <button type="button" class="btn option-btn" data-problem="lag">Lag nos jogos online</button>
                    <button type="button" class="btn option-btn" data-problem="quedas">Quedas na hora de trabalhar</button>
                </div>
            </div>
        </div>

        <!-- Slide 3: Solução -->
        <div class="story-slide" data-index="2">
            <video class="video-bg" autoplay loop muted playsinline>
                <source src="https://assets.mixkit.co/videos/preview/mixkit-data-flowing-in-a-digital-network-1245-large.mp4" type="video/mp4">
            </video>
            <div class="content">
                <div class="logo">LEO <span>TELECON</span></div>
                <h1>Ninguém merece <span id="problem-display"></span>!</h1>
                <p>O que é mais importante pra você na sua internet?</p>
                <div class="form-group">
                    <button type="button" class="btn option-btn" data-priority="velocidade">Velocidade absurda</button>
                    <button type="button" class="btn option-btn" data-priority="preco">Preço que cabe no bolso</button>
                    <button type="button" class="btn option-btn" data-priority="suporte">Suporte que resolve na hora</button>
                </div>
            </div>
        </div>

        <!-- Slide 4: Planos -->
        <div class="story-slide" data-index="3">
            <video class="video-bg" autoplay loop muted playsinline>
                <source src="https://assets.mixkit.co/videos/preview/mixkit-digital-financial-data-1246-large.mp4" type="video/mp4">
            </video>
            <div class="content">
                <div class="logo">LEO <span>TELECON</span></div>
                <h1>Quantas pessoas usam sua internet?</h1>
                <p>Isso vai ajudar a encontrar o plano perfeito!</p>
                <form class="form-group" id="plan-quiz">
                    <select class="input" id="people-count" aria-label="Número de pessoas">
                        <option value="1-2">1-2 pessoas</option>
                        <option value="3-5">3-5 pessoas</option>
                        <option value="6+">6 ou mais</option>
                    </select>
                    <button type="submit" class="btn">Ver meu plano</button>
                </form>
            </div>
        </div>

        <!-- Slide 5: Cobertura -->
        <div class="story-slide" data-index="4">
            <video class="video-bg" autoplay loop muted playsinline>
                <source src="https://assets.mixkit.co/videos/preview/mixkit-digital-map-with-data-points-1247-large.mp4" type="video/mp4">
            </video>
            <div class="content">
                <div class="logo">LEO <span>TELECON</span></div>
                <h1>Será que sua rua já tem nossa fibra?</h1>
                <p>Digite seu CEP e descubra agora!</p>
                <form class="form-group" id="cep-form">
                    <input type="text" class="input" id="cep-input" placeholder="Digite seu CEP" maxlength="8" aria-label="Digite seu CEP">
                    <button type="submit" class="btn">Verificar cobertura</button>
                </form>
            </div>
        </div>

        <!-- Slide 6: Fechamento -->
        <div class="story-slide" data-index="5">
            <video class="video-bg" autoplay loop muted playsinline>
                <source src="https://assets.mixkit.co/videos/preview/mixkit-happy-friends-using-a-laptop-1248-large.mp4" type="video/mp4">
            </video>
            <div class="content">
                <div class="logo">LEO <span>TELECON</span></div>
                <h1><span id="user-name-final"></span>, tá na hora!</h1>
                <p>Assine agora e ganhe 20% OFF no 1º mês! 🚀</p>
                <button class="btn" id="whatsapp-btn">Quero minha internet!</button>
                <button class="btn" id="share-btn">Compartilhar no Story</button>
            </div>
        </div>

        <div class="modal" id="result-modal">
            <div class="modal-content">
                <h2 id="modal-title">Parabéns!</h2>
                <p id="modal-text"></p>
                <button class="btn" id="modal-close">Fechar</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const slides = document.querySelectorAll('.story-slide');
            const progress = document.querySelector('.progress');
            const pointsBar = document.getElementById('points-bar');
            const onboardingForm = document.getElementById('onboarding-form');
            const planQuiz = document.getElementById('plan-quiz');
            const cepForm = document.getElementById('cep-form');
            const whatsappBtn = document.getElementById('whatsapp-btn');
            const shareBtn = document.getElementById('share-btn');
            const modal = document.getElementById('result-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalText = document.getElementById('modal-text');
            const modalClose = document.getElementById('modal-close');

            let currentIndex = 0;
            let userData = { name: '', dream: '', problem: '', priority: '', people: '', cep: '' };
            let megaPoints = 0;

            // Inicializar slide ativo
            slides[currentIndex].classList.add('active');
            updateProgress();

            // Navegação por swipe
            let touchStartY = 0;
            document.addEventListener('touchstart', (e) => {
                touchStartY = e.touches[0].clientY;
            });

            document.addEventListener('touchend', (e) => {
                const touchEndY = e.changedTouches[0].clientY;
                if (touchEndY < touchStartY - 50 && currentIndex < slides.length - 1) {
                    goToSlide(currentIndex + 1);
                } else if (touchEndY > touchStartY + 50 && currentIndex > 0) {
                    goToSlide(currentIndex - 1);
                }
            });

            // Onboarding
            onboardingForm.addEventListener('submit', (e) => {
                e.preventDefault();
                userData.name = document.getElementById('user-name').value || 'Amigo';
                userData.dream = document.getElementById('user-dream').value;
                document.getElementById('user-name-problem').textContent = userData.name;
                document.getElementById('user-name-final').textContent = userData.name;
                addMegaPoints(10);
                showModal('Bem-vindo!', `Pronto pra realizar seu sonho de ${userData.dream.replace('maratonar', 'maratonar séries').replace('jogar', 'jogar sem lag').replace('trabalhar', 'trabalhar sem quedas')}, ${userData.name}?`);
                goToSlide(1);
            });

            // Problema
            document.querySelectorAll('[data-problem]').forEach(btn => {
                btn.addEventListener('click', () => {
                    userData.problem = btn.dataset.problem;
                    document.getElementById('problem-display').textContent = userData.problem === 'travando' ? 'filmes travando' : userData.problem === 'lag' ? 'lag nos jogos' : 'quedas constantes';
                    addMegaPoints(15);
                    showModal('Entendemos você!', `Ninguém merece ${userData.problem === 'travando' ? 'filmes travando' : userData.problem === 'lag' ? 'lag nos jogos' : 'quedas constantes'}, ${userData.name}! Vamos resolver isso!`);
                    goToSlide(2);
                });
            });

            // Prioridade
            document.querySelectorAll('[data-priority]').forEach(btn => {
                btn.addEventListener('click', () => {
                    userData.priority = btn.dataset.priority;
                    addMegaPoints(15);
                    showModal('Boa escolha!', `${userData.priority === 'velocidade' ? 'Velocidade é com a gente!' : userData.priority === 'preco' ? 'Temos planos que cabem no seu bolso!' : 'Nosso suporte é imbatível!'}`);
                    goToSlide(3);
                });
            });

            // Quiz de Planos
            planQuiz.addEventListener('submit', (e) => {
                e.preventDefault();
                userData.people = document.getElementById('people-count').value;
                const plan = userData.people === '6+' ? 'Gamer (500Mbps)' : userData.people === '3-5' ? 'Família (300Mbps)' : 'Básico (100Mbps)';
                addMegaPoints(15);
                showModal('Plano Perfeito!', `Com ${userData.people} pessoas, o plano ${plan} é ideal pra você, ${userData.name}!`);
                goToSlide(4);
            });

            // Verificação de CEP
            cepForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                userData.cep = document.getElementById('cep-input').value.replace(/\D/g, '');
                if (userData.cep.length !== 8) {
                    showModal('Erro', 'Digite um CEP válido com 8 dígitos.');
                    return;
                }

                try {
                    const response = await fetch(`https://viacep.com.br/ws/${userData.cep}/json/`);
                    const data = await response.json();
                    if (data.erro) {
                        showModal('CEP Não Encontrado', 'Verifique o CEP ou fale conosco.');
                    } else {
                        const isCovered = Math.random() > 0.3;
                        if (isCovered) {
                            showModal('Boa Notícia!', `Temos cobertura em ${data.bairro}, ${data.localidade}! Assine agora, ${userData.name}!`);
                        } else {
                            showModal('Ainda Não Chegamos', `Ops, não cobrimos ${data.bairro} ainda. Quer ser avisado?`);
                        }
                    }
                    addMegaPoints(20);
                    goToSlide(5);
                } catch (error) {
                    showModal('Erro', 'Erro ao verificar o CEP. Tente novamente.');
                }
            });

            // WhatsApp
            whatsappBtn.addEventListener('click', () => {
                const message = `Oi, sou ${userData.name}! Quero a internet da Leo Telecon${userData.cep ? ` no CEP ${userData.cep}` : ''}${userData.problem ? ` pra resolver ${userData.problem === 'travando' ? 'filmes travando' : userData.problem === 'lag' ? 'lag nos jogos' : 'quedas constantes'}` : ''}.`;
                window.open(`https://wa.me/5500000000000?text=${encodeURIComponent(message)}`, '_blank');
                addMegaPoints(30);
            });

            // Compartilhar no Story
            shareBtn.addEventListener('click', () => {
                showModal('Compartilhar', 'Gere um Story com seu cupom LEO20OFF!');
                addMegaPoints(10);
            });

            // Funções auxiliares
            function goToSlide(index) {
                slides[currentIndex].classList.remove('active');
                currentIndex = index;
                slides[currentIndex].classList.add('active');
                updateProgress();
                gsap.fromTo(slides[currentIndex], { y: 100, opacity: 0 }, { y: 0, opacity: 1, duration: 0.5 });
            }

            function updateProgress() {
                const percentage = ((currentIndex + 1) / slides.length) * 100;
                progress.style.width = `${percentage}%`;
            }

            function addMegaPoints(points) {
                megaPoints += points;
                pointsBar.textContent = `${megaPoints} MegaPontos`;
                if (megaPoints >= 50) {
                    showModal('Parabéns!', `Você ganhou 20% OFF com o cupom LEO20OFF, ${userData.name}! Use agora!`);
                }
            }

            function showModal(title, text) {
                modalTitle.textContent = title;
                modalText.textContent = text;
                modal.classList.add('active');
            }

            modalClose.addEventListener('click', () => {
                modal.classList.remove('active');
            });

            // PWA Service Worker
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js');
            }
        });
    </script>
</body>
</html>